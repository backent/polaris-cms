import{d as ie,i as B,r as p,y as ue,z as de,k as se,o as re,b as u,e as F,f as L,w as n,j as V,t as M,u as y,A as me,g as t,h as b,l as $,F as _e,m as ce,s as ve,v as pe,p as fe}from"./index.dd466899.js";const z=v=>(ve("data-v-69df7a3d"),v=v(),pe(),v),ge=z(()=>b("h3",null,"Details",-1)),he=z(()=>b("h3",null,"Dimension",-1)),Ve=z(()=>b("h3",null,"Seat",-1)),ye=["index"],be={class:"tooltip"},we=ie({__name:"Form",props:{mode:{type:String,default:"create"},icon:{type:String,default:"mdi-pencil"},colorButton:{type:String,default:"orange"},id:{type:Number,default:0}},emits:["close"],setup(v,{emit:H}){const f=v,U=B("categoriesAPI"),_=B("productsAPI"),S=B("tempMediaAPI"),D=p(!1),K=p(null),j=p(null),w=p();let q=[];const s=p({name:[l=>!!l||"Name is required!"],category_id:[l=>!!l||"Category is required!"],group:[],id_description:[],en_description:[],features:[],premium_material:[],dimension_height:[l=>!!l||"Dimension height is required"],dimension_length:[l=>!!l||"Dimension length is required"],dimension_width:[l=>!!l||"Dimension width is required"],seat_width:[l=>!!l||"Seat width is required"],seat_height:[l=>!!l||"Seat height is required"],seat_length:[l=>!!l||"Seat length is required"]}),E={name:"",category_id:null,id_description:"",en_description:"",features:"",premium_material:"",dimension_height:0,dimension_length:0,seat_width:0,seat_height:0,seat_length:0,dimension_width:0,group:"",files:[],removedFiles:[]},o=p({...E}),c=p([]);function P(){H("close"),D.value=!1}async function I(){var l;return(l=j.value)==null?void 0:l.validate()}async function W(){const l=await I();if(!(l!=null&&l.valid))return;let e;const d={...o.value,files:o.value.files.map(r=>r.id)};return f.mode==="create"?e=_==null?void 0:_.post(d):e=_==null?void 0:_.put(o.value.id,d),e==null?void 0:e.then(()=>{P()}).catch(r=>{throw r})}ue(o,I,{deep:!0}),de(()=>{var l,e;o.value.category_id=(e=(l=w.value)==null?void 0:l.id)!=null?e:0});const k=se(()=>{const l={variant:void 0,icon:void 0,size:void 0,color:"primary"},e={variant:"plain",icon:f.icon,size:"x-small",color:f.colorButton};return f.mode==="create"?l:e});re(()=>{U==null||U.get().then(l=>{q=l.data})});function G(){o.value={name:"",category_id:null,id_description:"",en_description:"",features:"",premium_material:"",dimension_height:0,dimension_length:0,seat_width:0,seat_height:0,seat_length:0,dimension_width:0,group:"",files:[],removedFiles:[]},c.value=[]}async function T(){G(),f.mode!=="create"&&(_==null||_.show(f.id).then(l=>{const{images:e,...d}=l.data;o.value={...E,...d},w.value=q.find(r=>r.id===o.value.category_id),Q(e)}))}function A(){var l;(l=K.value)==null||l.click()}async function J(l){const e=l.target.files,d=[];for(let r=0;r<e.length;r++){const i=e.item(r),m=new FormData;m.append("file",i),d.push(S==null?void 0:S.post(m))}await Promise.all(d).then(r=>{o.value.files=[...o.value.files,...r.reduce((i,m,N)=>(i.push({id:m.data,file:e.item(N)}),i),[])]}),c.value=[...c.value,...l.target.files]}function O(l){try{l.id?(o.value.removedFiles=[...o.value.removedFiles,l.id],c.value=c.value.filter(e=>{var d;return((d=e==null?void 0:e.id)!=null?d:0)!==l.id})):(c.value=c.value.filter(e=>e!==l),o.value.files=o.value.files.filter(e=>e.file!==l))}catch(e){throw console.log("Error while deleting file"),e}}function g(l){const e=["0","1","2","3","4","5","6","7","8","9","."],d=l.key;e.includes(d)||l.preventDefault()}function Q(l){c.value=l.map(e=>({...e,name:e.original_name}))}return(l,e)=>{const d=u("v-icon"),r=u("v-card-title"),i=u("v-col"),m=u("v-text-field"),N=u("v-autocomplete"),R=u("v-combobox"),h=u("v-row"),x=u("v-textarea"),C=u("v-btn"),X=u("v-chip"),Y=u("v-container"),Z=u("v-form"),ee=u("v-card-text"),le=u("v-spacer"),te=u("v-card-actions"),oe=u("v-card"),ne=u("v-dialog");return F(),L(C,{variant:y(k).variant,size:y(k).size,color:y(k).color,onClick:T},{default:n(()=>[V(M(v.mode==="create"?"Add New":"")+" ",1),v.mode!=="create"?(F(),L(d,{key:0,icon:y(k).icon},null,8,["icon"])):me("",!0),t(ne,{modelValue:D.value,"onUpdate:modelValue":e[14]||(e[14]=a=>D.value=a),activator:"parent","max-width":"800"},{default:n(()=>[t(oe,null,{default:n(()=>[t(r,null,{default:n(()=>[V(" Form ")]),_:1}),t(ee,null,{default:n(()=>[t(Z,{ref_key:"formProduct",ref:j},{default:n(()=>[t(Y,null,{default:n(()=>[t(h,null,{default:n(()=>[t(i,{md:"12"},{default:n(()=>[ge]),_:1}),t(i,{md:"6"},{default:n(()=>[t(m,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a),rules:s.value.name,label:"Product Name"},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"6"},{default:n(()=>[t(N,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=a=>w.value=a),rules:s.value.category_id,items:y(q),label:"Category","item-title":"name","return-object":""},null,8,["modelValue","rules","items"])]),_:1}),t(i,{md:"6"},{default:n(()=>[t(R,{modelValue:o.value.group,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.group=a),rules:s.value.group,items:[],label:"Group"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(h,null,{default:n(()=>[t(i,{md:"12"},{default:n(()=>[t(x,{modelValue:o.value.en_description,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.en_description=a),rules:s.value.en_description,label:"Description (English)",counter:""},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"12"},{default:n(()=>[t(x,{modelValue:o.value.id_description,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.id_description=a),rules:s.value.id_description,label:"Description (Bahasa)",counter:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(h,null,{default:n(()=>[t(i,{md:"12"},{default:n(()=>[t(x,{modelValue:o.value.features,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.features=a),rules:s.value.features,label:"Features",counter:""},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"12"},{default:n(()=>[t(x,{modelValue:o.value.premium_material,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.premium_material=a),rules:s.value.premium_material,label:"Premium Material",counter:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(h,null,{default:n(()=>[t(i,{md:"12"},{default:n(()=>[he]),_:1}),t(i,{md:"4"},{default:n(()=>[t(m,{modelValue:o.value.dimension_width,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.dimension_width=a),modelModifiers:{number:!0},rules:s.value.dimension_width,onKeypress:g,label:"Width"},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"4"},{default:n(()=>[t(m,{modelValue:o.value.dimension_length,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.dimension_length=a),modelModifiers:{number:!0},rules:s.value.dimension_length,onKeypress:g,label:"Length"},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"4"},{default:n(()=>[t(m,{modelValue:o.value.dimension_height,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.dimension_height=a),modelModifiers:{number:!0},rules:s.value.dimension_height,onKeypress:g,label:"Height"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(h,null,{default:n(()=>[t(i,{md:"12"},{default:n(()=>[Ve]),_:1}),t(i,{md:"4"},{default:n(()=>[t(m,{modelValue:o.value.seat_width,"onUpdate:modelValue":e[10]||(e[10]=a=>o.value.seat_width=a),modelModifiers:{number:!0},rules:s.value.seat_width,onKeypress:g,label:"Width"},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"4"},{default:n(()=>[t(m,{modelValue:o.value.seat_length,"onUpdate:modelValue":e[11]||(e[11]=a=>o.value.seat_length=a),modelModifiers:{number:!0},rules:s.value.seat_length,onKeypress:g,label:"Length"},null,8,["modelValue","rules"])]),_:1}),t(i,{md:"4"},{default:n(()=>[t(m,{modelValue:o.value.seat_height,"onUpdate:modelValue":e[12]||(e[12]=a=>o.value.seat_height=a),modelModifiers:{number:!0},rules:s.value.seat_height,onKeypress:g,label:"Height"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(h,null,{default:n(()=>[t(i,{md:"3",style:{height:"40px"}},{default:n(()=>[t(C,{onClick:e[13]||(e[13]=a=>A())},{default:n(()=>[V(" Add Image ")]),_:1}),b("input",{ref_key:"file",ref:K,type:"file",accept:".png,.jpg,.jpeg",multiple:"",style:{visibility:"hidden"},onInput:J},null,544)]),_:1}),t(i,{md:"12",class:"files"},{default:n(()=>[(F(!0),$(_e,null,ce(c.value,(a,ae)=>(F(),$("div",{index:ae,class:"chip-container"},[t(X,{"prepend-icon":"mdi-file-image"},{default:n(()=>[V(M(l.$ellipsis(a.name,20))+" ",1),t(d,{icon:"mdi-trash-can-outline",color:"pink",style:{"margin-left":"5px"},onClick:ke=>O(a)},null,8,["onClick"])]),_:2},1024),b("div",be,M(a.name),1)],8,ye))),256))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),t(te,{class:"footer-form"},{default:n(()=>[t(le),t(C,{color:"primary",onClick:W},{default:n(()=>[V("Save")]),_:1}),t(C,{color:"orange",onClick:P},{default:n(()=>[V("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["variant","size","color"])}}});const Ce=fe(we,[["__scopeId","data-v-69df7a3d"]]);export{Ce as default};
